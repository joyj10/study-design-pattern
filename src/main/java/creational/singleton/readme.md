# 싱글톤 패턴 Singleton
- 클래스의 인스턴스는 오직 하나임을 보장하며 이 인스턴스에 접근할 수 있는 방법을 제공하는 패턴
- 1개의 객체만 존재하여 객체 공유 시 문제 발생 소지가 적은 패턴

## 싱글턴 패턴 적용 방법
- 객체를 생성할 수 있는 메서드를 추가하여 new 키워드 대신 객체 생성 메서드 호출 시 객체 반환
    - 클래스 생성자 접근 제한으로 new 키워드 이용 객체 생성 방법은 원천적으로 금지
    - 객체 생성 메서드는 정적 메서드로 작성(싱글턴 클래스는 객체가 존재하지 않아 객체 통한 메서드 접근이 불가함)
- 내부에 자신의 객체를 보관
- 내부적으로 중복 생성을 방지하는 로직을 추가 후 생성된 자신의 객체를 반환

```java
public class ConnectionPool {
    private static ConnectionPool instance;

    private ConnectionPool() {}

    public static ConnectionPool getInstance() {
        if(instance == null) {
            instance = new ConnectionPool();
        }
        return instance;
    }
}
```


## 목적 및 특징
- 자원 공유를 위해 객체 생성 개수를 1개로 제한
  - 예) DB 연결하는 connection 여러개일 수 있지만, connection pool 한 개
- 싱글턴 패턴 사용 이유
  - 일반적으로 객체를 new를 통해 생성하며 필요에 따라 무제한으로 생성 가능
  - 자원 공유가 필요한 경우 같은 클래스에서 생성된 객체더라도 new로 생성 시 서로 다른 메모리 영역을 차지하는 전혀 다른 객체 때문에 객체 상태값 공유할 수 없음
  - 전역 변수 처럼 생성한 객체를 공유해야 하는 경우 싱글턴 패턴으로 적용
- 아래 상황에서 유용
  - 공유 자원 접근
  - 복수의 시스템이 하나의 자원에 접근할 때
  - 유일한 객체가 필요할 때
  - 값의 캐시가 필요할 때


## 단점
- 싱글턴 안티 패턴으로 분류하는 경우도 있음
- 멀티 스레드 환경에서 싱글턴 패턴을 사용 시 주의 필요
  - 동일한 메모리나 자원에 동시에 접근해서 충돌이 발생할 수 있음
  - 싱글턴의 객체를 미리 생성
    - 미리 만들어서 프로그램 실행 도중 발생할 문제 최소화
    - 단, 프로그램 실행 중 단 한번도 사용되지 않는 객체도 메모리에 계속 있게 됨
- 싱글턴으로 생성한 객체의 메모리 낭비
    - 공유자원은 모든 객체가 접근하여 사용할 수 있으며, 언제 쓰일지 모르기 때문에 프로그램이 종료 될때까지 생존


## 예시
### 예시 1
- Singleton: 싱글톤으로 인스턴스를 생성해 놓고 반환하는 클래스
- SingletonMain1: 싱글톤으로 생성한 객체가 동일함 참조값(메모리 주소) 가지는지 확인
### 예시 2
- ConfigurationManager: 싱글톤 패턴으로 설정정보 매니저 생성, 설정정보 읽어서 조회할 수 있게 하는 클래스
- config.properties: 설정 데이터 작성 파일
- SingletonMain2: 싱글톤 패턴으로 생성한 매니저 통해 설정정보 읽는 클라이언트 코드
