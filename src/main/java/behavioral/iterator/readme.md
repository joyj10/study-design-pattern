# 반복자 Iterator 패턴
- 컬렉션 요소들의 기본 표현(리스트, 스택, 트리 등)을 노출하지 않고 그들을 하나씩 순회할 수 있도록 하는 행동 디자인 패턴
- 컬렉션의 구현 방법을 노출하지 않으면서 집합체 내의 모든 항목에 접근하는 방법을 제공
- 많은 프로그래밍 언어는 반복자 iterator 기본 제공

## 특징
- 반복자 패턴을 사용하면 내부 구현 방법을 외부로 노출하지 않으면서 집합체에 있는 모든 항목을 일일이 접근할 수 있음
- 순회 구현 방식이 다르더라도 동일한 방식(메서드)로 순회할 수 있음
- 여러 리스트 객체에 대한 동일한 방식 순회 방법 제공 위해 순회 객체 따로 만듦
    - ex) Java Collection - Iterator
- 반복자 패턴은 커서 패턴(cursor parttern)이라고도 하며, 컬렉션을 정해진 순서대로 가져올 때 사용
    - 컬렉션 : 배열, 링크드 리스트, 트리, 그래프, 점프 테이블 같이 데이터 컬렉션을 포함한고 있는 컨테이너를 의미
- 반복자 패턴은 컬렉션의 순회 작업을 컬렉션에서 분리한 후, 반복자에 넣어 컬렉션과 반복자의 책임이 단일하게 되도록 함
- 완전한 반복자 패턴은 컬렉션과 반복자로 구성

```java
// 첫 번째 인터페이스 정의 방식
public interface Iterator<E> {
	boolean hasNext();
	void next();
	E currentItem();
}

// 두 번째 인터페이스 정의 방식
public interface Iterator<E> {
	boolean hasNext();
	E next();
}
```

- 첫 번째 인터페이스 정의
    - 첫 번째의 경우 커서 이동을 직접 제어할 수 있어서 유연
    - next() : 커서를 한 칸 뒤로 이동하는 데 사용
    - currentItem() 현재 커서가 가리키는 요소 반환
- 두 번째 인터페이스 정의
    - next() : 현재 커서가 가리키는 요소를 반환하고 커서를 한칸 뒤로 이동

## 적용
- 컬렉션 내부에 복잡한 데이터 구조가 있지만 이 구조의 복잡성을 보안 등으로 숨기고 싶은 경우 사용
- 코드가 다른 데이터 구조들을 순회하고 싶은 경우 또는 이러한 구조들의 유형을 미리 알 수 없을 때 사용

## 구현 방법
1. 반복자 인터페이스 선언
    - 다음 요소를 가져오는 메서드, 다음 요소가 있는지 확인하는 메서드 등을 선언
2. 컬렉션 인터페이스를 선언하고 반복자를 가져오는 메서드 작성
    - 컬렉션 리턴 타입은 반복자 인터페이스 유형과 같아야 함
3. 반복자들이 순회할 수 있도록 하고 싶은 컬렉션에 대한 구상 반복자 클래스 구현
    - 반복자 객체는 단일 컬렉션 인스턴스와 반드시 연결되어야 함
4. 컬렉션 인터페이스 구현
    - 목적은 클라이언트에 특정 컬렉션 클래스에 맞게 조정된 반복자들을 생성하기 위한 바로 가기를 제공하는 것
5. 클라이언트 코드에서 반복자들을 사용하여 모든 컬렉션 순회하는 코드 교체

## 장점
- 집합체 내에서 어떤 식으로 일이 처리되는지 몰라도 그 안에 들어 있는 모든 항목을 대상으로 반복 작업을 수행할 수 있음
- 항목 접근 기능을 집합체가 아닌 반복자 객체가 책임진다는 장점이 있음
- 같은 컬렉션을 병렬로 순회할 수 있음
- 새로운 유형의 컬렉션들과 반복자들을 구현하여 기존 코드에게 전달 가능

## 단점
- 단순한 컬렉션으로 동작하는 경우 반복자 패턴 적용은 과도할 수 있음
- 반복자를 사용하는 것은 일부 특수 컬렉션들의 요소들을 직접 탐색하는 것보다 덜 효율적일 수 있음


## 예제
- 파일 시스템 순회 하면서 파일과 디렉토리 출력하는 예 
  - DirectoryIterator: 디렉토리를 순회하는 Iterator 인터페이스
  - DirectoryIteratorImpl: 디렉토리를 순회하는 Iterator 구현 클래스
  - FileIterator: 파일을 순회하는 Iterator 인터페이스
  - FileIteratorImpl: 파일을 순회하는 Iterator 구현 클래스
  - FileSystem: 실제 파일 시스템을 순회하는 구현 클래스, 내부 클래스로 파일 시스템을 순회하는 Iterator 구현 클래스 포함
  - Main: 파일 시스템을 순회하면서 파일과 디렉토리 출력 하는 클라이언트 클래스
